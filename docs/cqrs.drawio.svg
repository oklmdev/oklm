<svg host="65bd71144e" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1721px" height="1361px" viewBox="-0.5 -0.5 1721 1361" content="&lt;mxfile&gt;&lt;diagram id=&quot;2SQU20xnpKBhop0D2YcE&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;">
    <defs/>
    <g>
        <rect x="179.5" y="410" width="570" height="950" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <path d="M 976 70 L 976 403.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 976 408.88 L 972.5 401.88 L 976 403.63 L 979.5 401.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <rect x="950" y="40" width="60" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 55px; margin-left: 951px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                EventBus
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="980" y="59" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    EventBus
                </text>
            </switch>
        </g>
        <rect x="567" y="200" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <path d="M 579 200 L 579 260 M 675 200 L 675 260" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 230px; margin-left: 580px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                Demande
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="627" y="234" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Demande
                </text>
            </switch>
        </g>
        <rect x="320" y="0" width="60" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 15px; margin-left: 321px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                Commande
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="350" y="19" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Commande
                </text>
            </switch>
        </g>
        <rect x="300" y="55" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 85px; margin-left: 301px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                Accepter Demande
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="360" y="89" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Accepter Demande
                </text>
            </switch>
        </g>
        <rect x="689.5" y="220" width="60" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 235px; margin-left: 691px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                Agrégat
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="720" y="239" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Agrégat
                </text>
            </switch>
        </g>
        <rect x="573" y="319" width="127" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 125px; height: 1px; padding-top: 334px; margin-left: 575px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                <ul>
                                    <li>
                                        demandeId
                                    </li>
                                    <li>
                                        status
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="575" y="338" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">
                    demandeIdstatus
                </text>
            </switch>
        </g>
        <rect x="687" y="319" width="60" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 334px; margin-left: 688px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                State
                                <br/>
                                (private)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="717" y="338" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    State...
                </text>
            </switch>
        </g>
        <rect x="573" y="272" width="127" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 125px; height: 1px; padding-top: 287px; margin-left: 575px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                <ul>
                                    <li>
                                        accepter()
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="575" y="291" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">
                    accepter()
                </text>
            </switch>
        </g>
        <rect x="687" y="272" width="60" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 287px; margin-left: 688px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                Actions
                                <br/>
                                (public)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="717" y="291" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Actions...
                </text>
            </switch>
        </g>
        <path d="M 690.41 71.3 L 813.63 70.06" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 685.16 71.35 L 692.13 67.78 L 690.41 71.3 L 692.2 74.78 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 818.88 70.01 L 811.92 73.58 L 813.63 70.06 L 811.85 66.58 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 569.5 115 L 589.5 55 L 689.5 55 L 669.5 115 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 85px; margin-left: 571px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                DemandeRepo
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="630" y="89" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    DemandeRepo
                </text>
            </switch>
        </g>
        <rect x="599.5" y="25" width="60" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 40px; margin-left: 601px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                Repository
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="630" y="44" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Repository
                </text>
            </switch>
        </g>
        <path d="M 820 63 C 820 52.33 880 52.33 880 63 L 880 107 C 880 117.67 820 117.67 820 107 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <path d="M 820 63 C 820 71 880 71 880 63 M 820 67 C 820 75 880 75 880 67 M 820 71 C 820 79 880 79 880 71" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <rect x="820" y="25" width="60" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 40px; margin-left: 821px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                EventStore
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="850" y="44" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    EventStore
                </text>
            </switch>
        </g>
        <rect x="700" y="40" width="120" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 55px; margin-left: 701px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                (aggregateId) =&gt; event[]
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="760" y="59" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    (aggregateId) =&gt; eve...
                </text>
            </switch>
        </g>
        <rect x="1000" y="230" width="120" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 260px; margin-left: 1001px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                onDemandeAcceptée
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="1060" y="264" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    onDemandeAcceptée
                </text>
            </switch>
        </g>
        <rect x="408.75" y="1027" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1057px; margin-left: 410px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                accepter
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="469" y="1061" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    accepter
                </text>
            </switch>
        </g>
        <path d="M 318.75 1057 L 402.38 1057" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 407.63 1057 L 400.63 1060.5 L 402.38 1057 L 400.63 1053.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 1038px; margin-left: 340px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                args
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="369" y="1042" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    args
                </text>
            </switch>
        </g>
        <path d="M 528.75 1057 L 612.88 1057" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 618.13 1057 L 611.13 1060.5 L 612.88 1057 L 611.13 1053.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 1038px; margin-left: 561px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                void
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="590" y="1042" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    void
                </text>
            </switch>
        </g>
        <path d="M 439.5 983 L 439.5 1020.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 439.5 1025.88 L 436 1018.88 L 439.5 1020.63 L 443 1018.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 968px; margin-left: 411px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                state
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="440" y="972" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    state
                </text>
            </switch>
        </g>
        <path d="M 499.5 983 L 499.5 1020.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 499.5 1025.88 L 496 1018.88 L 499.5 1020.63 L 503 1018.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 968px; margin-left: 471px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                publishEvent
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="500" y="972" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    publishEve...
                </text>
            </switch>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 1072px; margin-left: 601px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                DemandeDéjàAcceptéeError
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="630" y="1076" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    DemandeDéj...
                </text>
            </switch>
        </g>
        <path d="M 498.75 1087 L 498.53 1126.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 498.51 1131.88 L 495.04 1124.86 L 498.53 1126.63 L 502.04 1124.9 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 1144px; margin-left: 470px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                publishEvent(DemandeAcceptée)
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="499" y="1148" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    publishEve...
                </text>
            </switch>
        </g>
        <rect x="362.5" y="664" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 694px; margin-left: 364px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                handleEvent
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="423" y="698" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    handleEvent
                </text>
            </switch>
        </g>
        <path d="M 285 694 L 356.13 694" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 361.38 694 L 354.38 697.5 L 356.13 694 L 354.38 690.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 675px; margin-left: 294px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                event
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="323" y="679" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    event
                </text>
            </switch>
        </g>
        <path d="M 482.5 694 L 566.63 694" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 571.88 694 L 564.88 697.5 L 566.63 694 L 564.88 690.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 675px; margin-left: 514px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                new state
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="543" y="679" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    new state
                </text>
            </switch>
        </g>
        <path d="M 413 620 L 413 657.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 413 662.88 L 409.5 655.88 L 413 657.63 L 416.5 655.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 605px; margin-left: 384px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                current state
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="413" y="609" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    current st...
                </text>
            </switch>
        </g>
        <path d="M 420 85 L 567.69 85.98" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 572.94 86.01 L 565.92 89.47 L 567.69 85.98 L 565.97 82.47 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <ellipse cx="490.5" cy="69.5" rx="10.5" ry="10.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 19px; height: 1px; padding-top: 70px; margin-left: 481px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                1
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="491" y="73" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    1
                </text>
            </switch>
        </g>
        <ellipse cx="700" cy="29.5" rx="10.5" ry="10.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 19px; height: 1px; padding-top: 30px; margin-left: 691px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                2
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="700" y="33" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    2
                </text>
            </switch>
        </g>
        <path d="M 629.5 115 L 627.79 193.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 627.68 198.88 L 624.33 191.81 L 627.79 193.63 L 631.33 191.96 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <ellipse cx="645.5" cy="160.5" rx="10.5" ry="10.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 19px; height: 1px; padding-top: 161px; margin-left: 636px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                3
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="646" y="164" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    3
                </text>
            </switch>
        </g>
        <ellipse cx="583.5" cy="287" rx="10.5" ry="10.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 19px; height: 1px; padding-top: 287px; margin-left: 574px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                4
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="584" y="291" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    4
                </text>
            </switch>
        </g>
        <path d="M 675.65 96.54 L 813.63 96.98" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 818.88 97 L 811.87 100.47 L 813.63 96.98 L 811.89 93.47 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 105px; margin-left: 705px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                new events
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="749" y="109" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    new events
                </text>
            </switch>
        </g>
        <ellipse cx="703.5" cy="105" rx="10.5" ry="10.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 19px; height: 1px; padding-top: 105px; margin-left: 694px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                5
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="704" y="109" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    5
                </text>
            </switch>
        </g>
        <path d="M 820 100 L 963.63 100" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 968.88 100 L 961.88 103.5 L 963.63 100 L 961.88 96.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <ellipse cx="900.5" cy="85" rx="10.5" ry="10.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 19px; height: 1px; padding-top: 85px; margin-left: 891px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                6
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="901" y="89" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    6
                </text>
            </switch>
        </g>
        <path d="M 980 260 L 993.63 260" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 998.88 260 L 991.88 263.5 L 993.63 260 L 991.88 256.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <ellipse cx="960.5" cy="249.5" rx="10.5" ry="10.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 19px; height: 1px; padding-top: 250px; margin-left: 951px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                7
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="961" y="253" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    7
                </text>
            </switch>
        </g>
        <path d="M 1200 234 C 1200 222 1300 222 1300 234 L 1300 286 C 1300 298 1200 298 1200 286 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 1200 234 C 1200 243 1300 243 1300 234 M 1200 238.5 C 1200 247.5 1300 247.5 1300 238.5 M 1200 243 C 1200 252 1300 252 1300 243" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 272px; margin-left: 1201px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                demandes
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="1250" y="275" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    demandes
                </text>
            </switch>
        </g>
        <path d="M 1120 260 L 1193.63 260" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 1198.88 260 L 1191.88 263.5 L 1193.63 260 L 1191.88 256.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 258px; height: 1px; padding-top: 191px; margin-left: 2px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <ol>
                                    <li>
                                        Le controlleur charge l'agrégat demande à partir du repository
                                    </li>
                                    <li>
                                        Le repository va chercher l'historique de cet agrégat dans l'event store
                                    </li>
                                    <li>
                                        Le repository construit l'instance de l'agrégat en lui passant son historique et la passe au callback du controlleur
                                    </li>
                                    <li>
                                        Le callback du controlleur appelle l'action accepter() sur l'agrégat et retourne
                                    </li>
                                    <li>
                                        Le repository récupère le(s) nouveau(x) événement(s) qui est attaché à l'agrégat et les insère dans l'event store
                                    </li>
                                    <li>
                                        Le repository/event store publie les événements sur l'event bus
                                    </li>
                                    <li>
                                        Les projections reçoivent les événements et peuvent se mettre à jour
                                    </li>
                                    <li>
                                        Les query peuvent requêter la projection pour produire les données nécessaire à afficher une vue / un écran
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="2" y="195" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">
                    Le controlleur charge l'agrégat demande à p...
                </text>
            </switch>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 523px; height: 1px; padding-top: 447px; margin-left: 191px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                L'agrégat est un objet qui est chargé en mémoire lors d'une commande. Il sert à déterminer la légalité d'une commande et le cas échéant, l'effet de bord approprié.
                                <br/>
                                <br/>
                                Pour déterminer la légalité de la commande, il se base sur son état interne, qui est construit à partir de l'historique (suite d'événements) de cet agrégat.
                                <br/>
                                <br/>
                                L'état interne ne contient pas tout ce qu'on sait sur cet agrégat mais uniquement les informations nécessaire à l'execution des commandes.
                                <br/>
                                <br/>
                                La construction de cet état à partir de l'historique est délégué à une méthode "handleEvent" qui a la forme suivante:
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="191" y="459" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">
                    L'agrégat est un objet qui est chargé en mémoire lors d'une commande. Il sert à détermi...
                </text>
            </switch>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 523px; height: 1px; padding-top: 757px; margin-left: 204px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                handleEvent est appelé sur chaque événement de l'historique (du plus ancien au plus récent) lors de l'instanciation de l'agrégat. L'agrégat qui est passé au controlleur a donc un état interne qui est à jour par rapport au système à ce moment-là.
                                <br/>
                                <br/>
                                handleEvent est également appelé pour chaque événement déclenché par les actions. Ainsi s'il y a un enchainement d'actions à effectuer, chacune aura accès à un état à jour. Par exemple, si on appelle deux fois "accepter()" sur une Demande, la première réussira et la deuxième échouera parce que son état à jour aura déjà le status "accepté".
                                <br/>
                                <br/>
                                <br/>
                                Les actions déterminent la légalité de la demande à partir de l'état et des arguments passés. Elles lèvent une erreur si ce n'est pas une action légale.
                                <br/>
                                Si l'action est légale, alors elle appelle publishEvent (méthode interne) avec l'événement à publier.
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="204" y="769" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">
                    handleEvent est appelé sur chaque événement de l'historique (du plus ancien au plus réc...
                </text>
            </switch>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 523px; height: 1px; padding-top: 1187px; margin-left: 191px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                publishEvent appelle d'une part handleEvent pour mettre à jour l'état interne et ajoute le nouvel événement dans une pile d'événement à publier (pendingEvents).
                                <br/>
                                <br/>
                                publishEvent ne publie rien sur l'event bus ou dans l'event store à ce stade. Il ne fait que modifier l'état interne de l'agrégat et tenir un registre des événements en attente de publication.
                                <br/>
                                <br/>
                                C'est le repository, à la fin de la transaction, qui récupère les événements en attente et les publie sur l'event store et l'event bus.
                                <br/>
                                <br/>
                                De cette manière, s'il y a plusieurs actions à effectuer et qu'une de ces actions échoue, c'est toute la transaction qui échoue et aucun événement n'aura été publié.
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="191" y="1199" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">
                    publishEvent appelle d'une part handleEvent pour mettre à jour l'état interne et ajoute...
                </text>
            </switch>
        </g>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 58px; height: 1px; padding-top: 425px; margin-left: 191px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <b>
                                    <font style="font-size: 14px">
                                        L'agrégat
                                    </font>
                                </b>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="191" y="429" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">
                    L'agrégat
                </text>
            </switch>
        </g>
        <rect x="1380" y="230" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 260px; margin-left: 1381px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                <font style="font-size: 12px">
                                    getDemande()
                                </font>
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="1440" y="264" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">
                    getDemande()
                </text>
            </switch>
        </g>
        <path d="M 1306.37 260 L 1373.63 260" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 1301.12 260 L 1308.12 256.5 L 1306.37 260 L 1308.12 263.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 1378.88 260 L 1371.88 263.5 L 1373.63 260 L 1371.88 256.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <ellipse cx="1340.5" cy="239.5" rx="10.5" ry="10.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 19px; height: 1px; padding-top: 240px; margin-left: 1331px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">
                                8
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="1341" y="243" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    8
                </text>
            </switch>
        </g>
        <path d="M 1600 233 L 1600 210 L 1720 210 L 1720 233" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 1600 233 L 1600 310 L 1720 310 L 1720 233" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 1600 233 L 1720 233" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px">
            <text x="1659.5" y="226">
                Vue demande
            </text>
        </g>
        <path d="M 1500 260 L 1593.63 260" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
        <path d="M 1598.88 260 L 1591.88 263.5 L 1593.63 260 L 1591.88 256.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/>
    </g>
    <switch>
        <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
        <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
            <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Viewer does not support full SVG 1.1
            </text>
        </a>
    </switch>
</svg>